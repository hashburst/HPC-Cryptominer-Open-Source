# HPC Cryptominer Supervisor Configuration
# Phase 7: System Services and Orchestration Configuration

# This configuration provides service management for the HPC Cryptominer
# It can be included in the main supervisord configuration or used standalone

[program:hpc_mining_engine]
command=python3 /app/main.py --mode=standalone --log-level=INFO
directory=/app
user=root
autostart=false
autorestart=true
startsecs=10
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/app/logs/hpc_mining_engine.log
stderr_logfile=/app/logs/hpc_mining_engine_error.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5
environment=PYTHONPATH="/app",PYTHONUNBUFFERED="1"

[program:hpc_cluster_master]
command=python3 /app/main.py --mode=cluster --log-level=INFO
directory=/app
user=root
autostart=false
autorestart=true
startsecs=15
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/app/logs/hpc_cluster_master.log
stderr_logfile=/app/logs/hpc_cluster_master_error.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5
environment=PYTHONPATH="/app",PYTHONUNBUFFERED="1"

[program:hpc_orchestrator]
command=python3 /app/main.py --mode=orchestrator --log-level=INFO
directory=/app
user=root
autostart=true
autorestart=true
startsecs=10
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/app/logs/hpc_orchestrator.log
stderr_logfile=/app/logs/hpc_orchestrator_error.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5
environment=PYTHONPATH="/app",PYTHONUNBUFFERED="1"

[program:hpc_dashboard]
command=python3 /app/main.py --mode=dashboard --log-level=INFO
directory=/app
user=root
autostart=true
autorestart=true
startsecs=8
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/app/logs/hpc_dashboard.log
stderr_logfile=/app/logs/hpc_dashboard_error.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5
environment=PYTHONPATH="/app",PYTHONUNBUFFERED="1"

[program:hpc_monitor]
command=python3 /app/main.py --mode=monitor --log-level=INFO
directory=/app
user=root
autostart=true
autorestart=true
startsecs=5
startretries=3
stopasgroup=true
killasgroup=true
stdout_logfile=/app/logs/hpc_monitor.log
stderr_logfile=/app/logs/hpc_monitor_error.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5
environment=PYTHONPATH="/app",PYTHONUNBUFFERED="1"

# Group configuration for easy management
[group:hpc_mining_services]
programs=hpc_mining_engine,hpc_cluster_master,hpc_orchestrator,hpc_dashboard,hpc_monitor
priority=999